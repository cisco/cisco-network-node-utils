# snmp_community
---

acl:
  nexus:
    get_command: "show running snmp all"
    get_value: '/^snmp-server community <name> use-acl (.*)$/'
    set_value: "<state> snmp-server community <name> use-acl <acl>"
    default_value: ""
  ios_xr:
    get_command: "show running snmp"
    get_value: '/^snmp-server community <name> IPv4 (.*)$/'
    set_value: "<state> snmp-server community <name> <acl>"
    default_value: ""

all_communities:
  nexus:
    multiple: true
    get_command: "show running snmp all"
    get_value: '/^snmp-server community (\S+) /'
  ios_xr:
    multiple: true
    get_command: "show running-config snmp"
    get_value: '/^snmp-server community (\S+)/'

community:
  nexus:
    get_command: "show running snmp all"
    get_value: '/^snmp-server community (%s) group .*$/'
    set_value: "<state> snmp-server community <name> group <group>"
  ios_xr:
    get_command: "show running-config snmp"
    get_value: '/^snmp-server community (%s) .*$/'
    set_value: "<state> snmp-server community <name>"

group:
  N3k: &structured_get
    kind: string
    get_data_format: nxapi_structured
    get_command: "show snmp community"
    get_context: ["TABLE_snmp_community", "ROW_snmp_community"]
    get_value: ["community_name <name>", "grouporaccess", '/^(?:Community groupname:\s+)?(\S+)/']
  N9k: *structured_get
  N9k-F: *structured_get
  ios_xr: &cli_based_get
    kind: string
    get_command: "show running snmp all"
    get_value: '/^snmp-server community <name> group (.*)$/'
  N5k: *cli_based_get
  N6k: *cli_based_get
  N7k: *cli_based_get
  set_value: "snmp-server community <name> group <group>"
  default_value: "network-operator"

group_community_mapping:
    get_command: "show running snmp"
    get_value: '/^snmp-server community-map <name> target-list (.*)$/'
    set_value: "snmp-server community-map <name> target-list <group>"

group_simple:
    get_command: "show running snmp"
    set_value: "snmp-server group <group> v3 noauth"
